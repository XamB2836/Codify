<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CodeReveal Pro | Your Product Name</title>
  <!-- Prism.js for syntax highlighting -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css" rel="stylesheet">
  <style>
    /* Your existing CSS styles */
  </style>
</head>
<body>
  <!-- Password Gate -->
  <div class="password-gate">
    <div class="password-form">
      <h2>Enter Access Code</h2>
      <input type="password" id="passwordInput" placeholder="Enter your access code">
      <button onclick="checkPassword()">Unlock Content</button>
      <p id="errorMsg" style="color: red; margin-top: 1rem; display: none;">Invalid code</p>
    </div>
  </div>

  <!-- Content -->
  <div class="content" style="display: none;">
    <header class="header">
      <h1>✨ CodeReveal Pro</h1>
      <p>Click any image to reveal the code</p>
    </header>

    <div class="grid">
      <!-- Card 1 -->
      <div class="card">
        <button class="copy-btn" onclick="copyCode('code1')">Copy</button>
        <!-- Image mise à jour pour le premier code -->
        <img src="photo1.png" alt="Photo 1" class="card-image" data-code="code1">

        <div class="code-container" id="code1">
          <pre><code class="language-html" id="code1-content">
            <!-- The content will be loaded here by JavaScript -->
          </code></pre>
        </div>
      </div>

      <!-- Card 2 -->
      <div class="card">
        <button class="copy-btn" onclick="copyCode('code2')">Copy</button>
        <img src="photo2.jpg" alt="Feature 2" class="card-image" data-code="code2">
        <div class="code-container" id="code2">
          <pre><code class="language-python">
# Exemple en Python avec annotations de type
from typing import List

def fibonacci(n: int) -> List[int]:
    """Génère la séquence de Fibonacci"""
    sequence = [0, 1]
    while len(sequence) < n:
        sequence.append(sum(sequence[-2:]))
    return sequence[:n]

print(fibonacci(10))
          </code></pre>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-python.min.js"></script>
  <script>
    // ********************
    // 1. Protection par mot de passe
    // ********************
    const validPassword = "123";
    
    function checkPassword() {
      const input = document.getElementById('passwordInput').value;
      const errorMsg = document.getElementById('errorMsg');
      
      if (input === validPassword) {
        document.querySelector('.password-gate').style.display = 'none';
        document.querySelector('.content').style.display = 'block';
        // Load the code content after unlocking
        loadCodeContent();
      } else {
        errorMsg.style.display = 'block';
        setTimeout(() => {
          errorMsg.style.display = 'none';
        }, 2000);
      }
    }

    // ********************
    // 2. Load the code content from the file
    // ********************
    function loadCodeContent() {
      fetch('codes/Coupon-code-with-timer.html')
        .then(response => response.text())
        .then(data => {
          document.getElementById('code1-content').textContent = data;
          Prism.highlightAll(); // Re-run Prism.js to apply syntax highlighting
        })
        .catch(error => console.error('Error loading the code:', error));
    }

    // ********************
    // 3. Affichage/Masquage du code
    // ********************
    document.querySelectorAll('.card-image').forEach(img => {
      img.addEventListener('click', () => {
        const codeId = img.dataset.code;
        const codeContainer = document.getElementById(codeId);
        codeContainer.classList.toggle('active');
      });
    });

    // ********************
    // 4. Copier le code dans le presse-papiers
    // ********************
    function copyCode(codeId) {
      const code = document.querySelector(`#${codeId} code`).innerText;
      navigator.clipboard.writeText(code).then(() => {
        alert('Code copied to clipboard!');
      });
    }

    // ********************
    // 5. Navigation au clavier (fermer le code avec la touche Échap)
    // ********************
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        document.querySelectorAll('.code-container.active').forEach(container => {
          container.classList.remove('active');
        });
      }
    });
  </script>
</body>
</html>
